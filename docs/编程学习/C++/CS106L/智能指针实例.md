`SmartPointer.cpp:`

```c++
#include <SmartPointer.h>
#include <cstddef>

template <typename T>
class SmartPointer
{
public:
    explicit SmartPointer(T *memory);
    SmartPointer(const SmartPointer &other);
    SmartPointer &operator=(const SmartPointer &other);
    ~SmartPointer();

    T& operator *() const;
    T* operator ->() const;

    T* get() const;
    size_t getShareCount() const;

    void reset(T* newRes);

private:
    struct Intermediary
    {
        T* resource;
        size_t refCount;
    };
    Intermediary *data;

    void detach();
    void attach(Intermediary* other);
};
```

`SmartPointer.h`

```c++
#include <SmartPointer.h>
#include <cstddef>

template <typename T>
class SmartPointer
{
public:
    explicit SmartPointer(T *memory);
    SmartPointer(const SmartPointer &other);
    SmartPointer &operator=(const SmartPointer &other);
    ~SmartPointer();

    T& operator *() const;
    T* operator ->() const;

    T* get() const;
    size_t getShareCount() const;

    void reset(T* newRes);

private:
    struct Intermediary
    {
        T* resource;
        size_t refCount;
    };
    Intermediary *data;

    void detach();
    void attach(Intermediary* other);
};
```
